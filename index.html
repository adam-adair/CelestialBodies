<!DOCTYPE html><html> <head> <title>Celestial Bodies</title> <meta name="monetization" content="$ilp.uphold.com/UZLPzDafnHhf"/> <style>*{-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;}html, body{margin: 10; padding: 0; overflow: hidden; height: 100%; color: white; background-color: rgb(17, 17, 17);}body > h2{text-align: center;}#bodyForm > *, #sizeDiv > *{display: block;}.flexContainer{display: flex; justify-content: space-between;}.flexContainer > *{flex: 1; text-align: center;}#container > div{margin: 1rem;}#bodyList{height: 50%;}#panels{height: 90vh; flex: 2;}.scrollable{overflow-y: auto;}ul{list-style-type: none; padding: 0; margin: 0;}.card{height: fit-content; padding: 0.5rem;}.card:hover{box-shadow: 1px 1px 1px black; background-color: goldenrod;}.card h5{margin: 0; white-space: nowrap;}.column{flex-direction: column;}button{margin-left: 1rem;}#gameContainer{display: flex; height: 90vh;}.wide{flex: 4;}input[type="number"]{max-width: 50px;}#presets > button{align-self: center; margin: 4px;}.bold{font-weight: bold;}.yellow{color: goldenrod;}.bottom{position: absolute; left: 20px; bottom: 20px;}#titleOverlay{width: 100%; height: 100%; position: absolute; background-color: rgba(0, 0, 0, 0.6); display: flex; align-items: center; justify-content: center; z-index: 1;}#titleOverlay > p{font-size: 8em; color: white; text-shadow: 4px 4px goldenrod;}</style> </head> <body> <div id="titleOverlay" class="column"> <p>CELESTIAL BODIES</p><h4 id="musicStatus">Music Loading: 0%</h4> </div><h2>Celestial Bodies</h2> <div id="gameContainer" class="flexContainer"> <div id="instructions"> <span class="yellow bold"> Camera Controls </span><br/> Look with mouse<br/> `: pause<br/> u or 3: backwards<br/> o or 9: forward<br/> i or 8: up<br/> k or 2: down<br/> j or 4: strafe left<br/> l or 6: strafe right<br/> m or 1: roll left<br/> . or 7: roll right<br/> <br/> <br/> <span class="yellow bold"> New Body Controls</span><br/> a, d: Move Along X-Axis<br/> w, s: Move Along Y-Axis<br/> q, e: Move Along Z-Axis<br/> <br/> <span class="yellow bold"> Example Scenarios</span><br/> <div id="presets" class="flexContainer column"> <button id="stableOrbit">Stable Orbit</button> <button id="binaryStars">Binary Stars</button> <button id="randomSystem">Random System</button> <button id="emptyUniverse">Empty Universe</button> </div></div><div id="canvasContainer" class="wide"> <canvas id="canvas"></canvas> </div><div id="panels" class="scrollable"> <div id="addBody"> <div> <button id="bodyButton">Add Body</button> <button id="cancelButton" style="display: none">Cancel</button> </div><form id="bodyForm" style="display: none"> <div id="radioButtons"> <input type="radio" id="bodyPlanet" name="bodyType" value="planet"/> <label for="bodyPlanet">Planet</label> <input type="radio" id="bodyStar" name="bodyType" value="star"/> <label for="bodyStar">Star</label> </div><div id="bodyOptions"> <div id="nameDiv" class="hideable planet star whiteHole"> <label for="bodyName">Celestial Body Name:</label> <input type="text" id="bodyName" name="bodyName"/> </div><div id="sizeDiv" class="hideable planet"> <div> <label for="bodySize" id="bodySizeLabel">Size:</label> <br/> <input type="range" id="bodySize" name="bodySize"/> </div></div><div id="massDiv" class="hideable planet star"> <label for="bodyMass" id="bodyMassLabel">Mass:</label> <br/> <input type="range" id="bodyMass" name="bodyMass"/> </div><div id="positionDiv" class="hideable planet star whiteHole"> Position: X:<input type="number" id="posX" name="posX" step=".1" value="0"/> Y:<input type="number" id="posY" name="posY" step=".1" value="0"/> Z:<input type="number" id="posZ" name="posZ" step=".1" value="0"/> </div><div id="velocityDiv" class="hideable planet star"> Initial Velocity: X:<input type="number" id="velX" name="velX" min="-50" max="50" step=".01" value="0"/> Y:<input type="number" id="velY" name="velY" min="-50" max="50" step=".01" value="0"/> Z:<input type="number" id="velZ" name="velZ" min="-50" max="50" step=".01" value="0"/> </div><div id="surfaceDiv" class="hideable planet"> Surface: <input type="radio" id="grass" name="bodySurface" value="grass"/> <label for="grass">Grass</label> <input type="radio" id="water" name="bodySurface" value="water"/> <label for="water">Water</label> <input type="radio" id="sand" name="bodySurface" value="sand"/> <label for="sand">Sand</label> <input type="radio" id="solid" name="bodySurface" value="color"/> <label for="solid">Solid</label> </div><div id="colorDiv" class="hideable planet"> <label for="color">Base Color</label> <input type="color" id="colorRGB" name="bodyBase" value="#ffffff"/> </div></div></form> </div><div id="bodyList"> <h3>Stars</h3> <ul id="starList" class="scrollable"></ul> <h3>Planets</h3> <ul id="planetList" class="scrollable"></ul> <h3 id="whHeader" style="visibility: hidden">White Holes</h3> <ul id="whiteHoleList" class="scrollable"></ul> </div></div></div><script>(()=>{function t(s){var a=i[s];if(void 0!==a)return a.exports;var n=i[s]={exports:{}};return e[s](n,n.exports,t),n.exports}var e={944(t){t.exports="precision mediump float;varying vec4 v_color;varying float v_useTexture;uniform sampler2D sampler0;varying vec2 v_texCoord;void main(){if(v_texCoord.y==-99.0){gl_FragColor=vec4(0.0,0.5,0.5,0.5);}else{gl_FragColor=v_color*texture2D(sampler0,v_texCoord);}}"},408(t){t.exports="attribute vec4 position;attribute vec4 color;attribute vec4 normal;attribute vec2 texCoord;attribute float useTexture;attribute float sunFlag;uniform mat4 camera;uniform mat4 model;uniform mat4 nM;uniform vec3 light;uniform vec3 ambientLight;varying vec4 v_color;varying vec2 v_texCoord;void main(){gl_Position=camera*model*position;vec3 wNormal=normalize(mat3(nM)*normal.xyz);vec3 lightDirection=normalize(light-vec3(model*position));float nDotL=dot(wNormal,lightDirection);vec3 ambient=ambientLight*color.rgb;vec3 diffuse=color.rgb*nDotL;if(sunFlag==1.0){v_color=color;}else{v_color=vec4(diffuse+ambient,1.0);}v_texCoord=texCoord;gl_PointSize=3.0;}"}},i={};t.d=(e,i)=>{for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:1,get:i[s]})},t.o=(t,e)=>({}.hasOwnProperty.call(t,e));var s={};(()=>{"use strict";t.d(s,{aE(){return ve},RC(){return Ae},Sl(){return Te}});const e=function(){var t,e,i,s,a,n=t=>Math.sin(6.283184*t),o=t=>.003959503758*2**((t-128)/12),r=(t,e,i)=>{var s,a,n,r,c,h,m=l[t.i[0]],d=t.i[1],u=t.i[3]/32,p=l[t.i[4]],v=t.i[5],w=t.i[8]/32,y=t.i[9],f=t.i[10]*t.i[10]*4,x=t.i[11]*t.i[11]*4,M=t.i[12]*t.i[12]*4,b=1/M,g=-t.i[13]/16,T=t.i[14],A=i*2**(2-t.i[15]),z=new Int32Array(f+x+M),E=0,L=0;for(s=0,a=0;f+x+M>s;s++,a++)0>a||(a-=A,c=o(e+(15&(T=T>>8|(255&T)<<4))+t.i[2]-128),h=o(e+(15&T)+t.i[6]-128)*(1+8e-4*t.i[7])),n=1,f>s?n=s/f:f+x>s||(n=(1-(n=(s-f-x)*b))*3**(g*n)),r=m(E+=c*n**u)*d,r+=p(L+=h*n**w)*v,y&&(r+=(2*Math.random()-1)*y),z[s]=80*r*n|0;return z},l=[n,t=>.5>t%1?1:-1,t=>t%1*2-1,t=>{var e=t%1*4;return 2>e?e-1:3-e}];this.init=n=>{t=n,i=0,s=n.rowLen*n.patternLen*((e=n.endPattern)+1)*2,a=new Int32Array(s)},this.generate=()=>{var o,c,h,m,d,u,p,v,w,y,f,x,M,b,g=new Int32Array(s),T=t.songData[i],A=t.rowLen,z=t.patternLen,E=0,L=0,S=0,F=[];for(h=0;e>=h;++h)for(p=T.p[h],m=0;z>m;++m){var C=p?T.c[p-1].f[m]:0;C&&(T.i[C-1]=T.c[p-1].f[m+z]||0,17>C&&(F=[]));var R=l[T.i[16]],P=T.i[17]/512,_=2**(T.i[18]-9)/A,B=T.i[19],k=T.i[20],D=135.82764118168*T.i[21]/44100,U=1-T.i[22]/255,O=1e-5*T.i[23],I=T.i[24]/32,H=T.i[25]/512,N=6.283184*2**(T.i[26]-9)/A,j=T.i[27]/255,X=T.i[28]*A&-2;for(f=(h*z+m)*A,d=0;4>d;++d)if(u=p?T.c[p-1].n[m+d*z]:0){F[u]||(F[u]=r(T,u,A));var V=F[u];for(c=0,o=2*f;V.length>c;c++,o+=2)g[o]+=V[c]}for(c=0;A>c;c++)(y=g[v=2*(f+c)])||S?(x=D,B&&(x*=R(_*v)*P+.5),L+=(x=1.5*Math.sin(x))*(M=U*(y-L)-(E+=x*L)),y=3==k?L:1==k?M:E,O&&(y=1>(y*=O)?y>-1?n(.25*y):-1:1,y/=O),S=(y*=I)*y>1e-5,b=y*(1-(w=Math.sin(N*v)*H+.5)),y*=w):b=0,X>v||(b+=g[v-X+1]*j,y+=g[v-X]*j),g[v]=0|b,g[v+1]=0|y,a[v]+=0|b,a[v+1]+=0|y}return++i/t.numChannels},this.createAudioBuffer=t=>{for(var e=t.createBuffer(2,s/2,44100),i=0;2>i;i++)for(var n=e.getChannelData(i),o=i;s>o;o+=2)n[o>>1]=a[o]/65536;return e},this.createWave=()=>{var t=44+2*s-8,e=t-36,i=new Uint8Array(44+2*s);i.set([82,73,70,70,255&t,t>>8&255,t>>16&255,t>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&e,e>>8&255,e>>16&255,e>>24&255]);for(var n=0,o=44;s>n;++n){var r=a[n];i[o++]=255&(r=-32767>r?-32767:r>32767?32767:r),i[o++]=r>>8&255}return i},this.getData=(t,e)=>{for(var i=2*Math.floor(44100*t),s=Array(e),n=0;2*e>n;n+=1){var o=i+n;s[n]=t>0&&a.length>o?a[o]/32768:0}return s}},i={songData:[{i:[2,48,128,0,3,158,128,0,0,0,5,6,58,0,0,0,0,195,6,1,2,35,0,0,32,147,15,123,6],p:[1,1,2,1,1,2,1,2,1,2,1,2,3,,,,1,2],c:[{n:[147,,,,,,,,,,,,,,,,149],f:[]},{n:[147,,,,,,,,,,,,,,,,151,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,149],f:[,,,,,,,,,,,,,,,,6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,158]},{n:[147],f:[]}]},{i:[0,37,128,0,0,56,128,9,0,0,3,13,19,55,0,0,0,92,0,1,2,104,15,4,39,47,3,146,1],p:[,,,,1,1,2,2,1,2,1,2,1,2,1,3],c:[{n:[168,,,,,,,,,,,,,,154,,168],f:[]},{n:[168,,,,,,,,,,,,,,149,,151],f:[]},{n:[168,,,,,,,,,,,,,,,,168],f:[]}]},{i:[0,91,140,0,0,0,98,0,0,7,0,33,25,0,0,0,0,51,2,0,2,58,23,0,32,25,1,226,4],p:[,,,,,,,,1,1,1,1,1,1,1,1,1],c:[{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,103],f:[]}]},{i:[0,65,100,85,0,150,128,118,0,0,32,15,121,67,99,2,0,65,16,1,2,63,184,0,52,0,2,63,8],p:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],c:[{n:[119,,,,119,,,,119,,,,119,,,,119,,,,119,,,,119,,,,119],f:[]}]}],rowLen:6750,patternLen:32,endPattern:17,numChannels:4},a=t=>Math.pow(t,.8)/2,n=a(200),o={clearColor:{r:0,g:0,b:0,a:1},zoom:36,lightDirection:{x:0,y:4,z:10},ambientLightAmount:1,movement:.5,gravitationalConstant:.01,minStarMass:1,maxStarMass:200,sunSizeFactor:.8,maxStarSize:n,minStarSize:a(1),massColorFactor:12.5,minPlanetMass:.1,maxPlanetMass:.75,minPlanetSize:.5,maxPlanetSize:Math.floor(n/20),impactThreshold:.156,speedAdjust:.02,massAdjust:1,sizeAdjust:1,universeSize:200,starMasstoRadius:a,maxSpawnTime:600,minSpawnTime:60},r=t=>document.getElementById(t),l=()=>{let t=o.universeSize-2*o.maxStarSize;const e=Math.random()*t*2-t;t-=Math.abs(e);const i=Math.random()*t*2-t;return t-=i,[e,i,Math.random()*t*2-t]},c=(t,e=0)=>Math.random()*(t-e)+e,h=(t,e,i=1)=>[t.x+e.x*i*4,t.y+e.y*i*4,t.z+e.z*i*4],m={3:"u",9:"o",8:"i",2:"k",4:"j",6:"l",1:"m",7:"."},d=(t,e,i)=>{switch(m[t.key]?m[t.key]:t.key){case"w":i.up=e;break;case"a":i.left=e;break;case"s":i.down=e;break;case"d":i.right=e;break;case"q":i.in=e;break;case"e":i.out=e;break;case"r":i.spinR=e;break;case"f":i.spinL=e;break;case"t":i.spinU=e;break;case"g":i.spinD=e;break;case"y":i.spinI=e;break;case"h":i.spinO=e;break;case"l":i.camR=e;break;case"j":i.camL=e;break;case"i":i.camU=e;break;case"k":i.camD=e;break;case"o":i.camI=e;break;case"u":i.camO=e;break;case"m":i.camRL=e;break;case".":i.camRR=e}};class u{constructor(t){this.p=[];for(var e=0;256>e;e++)this.p[e]=Math.floor(256*Math.random());for(this.perm=[],e=0;512>e;e++)this.perm[e]=this.p[255&e];this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.noiseData=t}mix(t,e,i){return(1-i)*t+i*e}perlinDot(t,e,i,s){return t[0]*e+t[1]*i+t[2]*s}fade(t){return t*t*t*(t*(6*t-15)+10)}n(t,e,i){const{perm:s,fade:a,mix:n,perlinDot:o,grad3:r}=this;var l=Math.floor(t),c=Math.floor(e),h=Math.floor(i);t-=l,e-=c,i-=h;var m=s[(l&=255)+s[(c&=255)+s[1+(h&=255)]]]%12,d=s[l+s[c+1+s[h]]]%12,u=s[l+s[c+1+s[h+1]]]%12,p=s[l+1+s[c+s[h]]]%12,v=s[l+1+s[c+s[h+1]]]%12,w=s[l+1+s[c+1+s[h]]]%12,y=s[l+1+s[c+1+s[h+1]]]%12,f=o(r[s[l+s[c+s[h]]]%12],t,e,i),x=o(r[p],t-1,e,i),M=o(r[d],t,e-1,i),b=o(r[w],t-1,e-1,i),g=o(r[m],t,e,i-1),T=o(r[v],t-1,e,i-1),A=o(r[u],t,e-1,i-1),z=o(r[y],t-1,e-1,i-1),E=a(t),L=a(e),S=a(i),F=n(f,x,E),C=n(g,T,E),R=n(M,b,E),P=n(A,z,E),_=n(F,R,L),B=n(C,P,L);return n(_,B,S)}noise(t,e,i){const{attenuation:s,startingOctave:a,roughness:n,numOctaves:o}=this.noiseData;for(var r=Math.pow(s,-a),l=Math.pow(n,a),c=0,h=a;o+a>h;h++)c+=this.n(t*l,e*l,i*l)*r,r/=s,l*=n;return c/o}}const p=(t,e,i=0,s=1)=>{const{baseColor:a,noiseDataArray:n}=e,o=Array(t*t);for(var r=0;t*t*4>r;r+=4)o[r]=a[0],o[r+1]=a[1],o[r+2]=a[2],o[r+3]=a[3];const l=2*Math.PI;for(r=0;n.length>r;r++)for(var c=n[r],h=new u(c),m=0,d=0;t>d;d++)for(var p=0;t>p;p++){for(var v=Math.abs(h.noise((4+1*Math.cos(l*d/t))*Math.cos(l*p/t),(4+1*Math.cos(l*d/t))*Math.sin(l*p/t),1*Math.sin(l*d/t))),w=0;3>w;w++,m++)o[m]=Math.min(255,Math.floor(o[m]+v*c.color[w]*c.color[3]/255));m++}if(i){var y=document.createElement("canvas");y.width=y.height=t*s;var f=y.getContext("2d"),x=f.createImageData(t,t);for(let t=0;o.length>t;t++)x.data[t]=o[t];f.putImageData(x,0,0),f.scale(s,s),f.drawImage(y,0,0),document.body.appendChild(y)}return o},v={width:128,height:128,data:new Uint8Array(p(128,{baseColor:[202,177,50,255],noiseDataArray:[{color:[235,221,61,1024],attenuation:1.5,roughness:1.3,numOctaves:4,startingOctave:2},{color:[255,255,255,255],attenuation:1.5,roughness:5,numOctaves:3,startingOctave:5}]}))},w={width:128,height:128,data:new Uint8Array(p(128,{baseColor:[53,161,27,255],noiseDataArray:[{color:[95,235,61,180],attenuation:2,roughness:2,numOctaves:3,startingOctave:2},{color:[200,-60,0,2550],attenuation:2,roughness:2,numOctaves:5,startingOctave:2}]}))},y={width:128,height:128,data:new Uint8Array(p(128,{baseColor:[0,0,255,255],noiseDataArray:[{color:[255,255,255,850],attenuation:1.3,roughness:1.4,numOctaves:6,startingOctave:2}]}))},f={width:1,height:1,data:new Uint8Array([255,255,255,255])},{clearColor:x,lightDirection:M,ambientLightAmount:b}=o,g=document.getElementById("canvas");g.width=r("canvasContainer").scrollWidth,g.height=r("canvasContainer").scrollHeight;const T=g.getContext("webgl"),A=T.createProgram(),z=t(408),E=t(944),L=T.createShader(T.VERTEX_SHADER);T.shaderSource(L,z),T.compileShader(L);const S=T.createShader(T.FRAGMENT_SHADER);T.shaderSource(S,E),T.compileShader(S),T.attachShader(A,L),T.attachShader(A,S),T.linkProgram(A),T.useProgram(A),T.clearColor(x.r,x.g,x.b,x.a),T.clear(T.COLOR_BUFFER_BIT|T.DEPTH_BUFFER_BIT),T.enable(T.DEPTH_TEST);const F=T.getUniformLocation(A,"light");T.uniform3f(F,M.x,M.y,M.z);const C=T.getUniformLocation(A,"ambientLight");T.uniform3f(C,b,b,b);const R={gl:T,program:A,canvas:g};class P{constructor(t,e,i){this.r=t,this.g=e,this.b=i}}const _=new P(1,0,0),B=new P(0,1,0),k=new P(0,0,1),D=new P(2,2,2),U=new P(1,1,0),O=new P(1,.5,0),I=new P(.68,.93,2),H=new P(.34,.45,2),N=()=>new P(Math.random(),Math.random(),Math.random()),j={Red:_,Green:B,Blue:k,White:D,Yellow:U,Orange:O,ClassA:I,ClassB:H,randomColor:N},{gl:X,program:V}=R;class Y extends DOMMatrix{transposeSelf(){let t;t=this.m12,this.m12=this.m21,this.m21=t,t=this.m13,this.m13=this.m31,this.m31=t,t=this.m14,this.m14=this.m41,this.m41=t,t=this.m23,this.m23=this.m32,this.m32=t,t=this.m24,this.m24=this.m42,this.m42=t,t=this.m34,this.m34=this.m43,this.m43=t}}class G{constructor(t,e,i){this.x=t,this.y=e,this.z=i}subtract(t){return new G(this.x-t.x,this.y-t.y,this.z-t.z)}add(t){return new G(this.x+t.x,this.y+t.y,this.z+t.z)}scale(t){return new G(this.x*t,this.y*t,this.z*t)}cross(t){return new G(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){const t=this.magnitude();if(t>0)return this.scale(1/t)}}class W{constructor(t,e,i,s=D){this.vAi=t,this.vBi=e,this.vCi=i,this.color=s}}class ${constructor(t,e,i,s,a,n=0){this.draw=()=>{const{gl:t,program:e}=this;if(this.texture){const i=t.getUniformLocation(e,"sampler");t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.gl_texture),"data"in this.texture?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.pixelStorei(t.UNPACK_ALIGNMENT,1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.texture.width,this.texture.height,0,t.RGBA,t.UNSIGNED_BYTE,this.texture.data)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGB,t.RGB,t.UNSIGNED_BYTE,this.texture)),t.uniform1i(i,0)}t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.vbo,t.STATIC_DRAW);const i=this.vbo.BYTES_PER_ELEMENT,s=t.getAttribLocation(e,"position");t.vertexAttribPointer(s,3,t.FLOAT,0,12*i,0),t.enableVertexAttribArray(s);const a=t.getAttribLocation(e,"color");t.vertexAttribPointer(a,3,t.FLOAT,0,12*i,3*i),t.enableVertexAttribArray(a);const n=t.getAttribLocation(e,"normal");t.vertexAttribPointer(n,3,t.FLOAT,0,12*i,6*i),t.enableVertexAttribArray(n);const o=t.getAttribLocation(e,"texCoord");t.vertexAttribPointer(o,2,t.FLOAT,0,12*i,9*i),t.enableVertexAttribArray(o);const r=t.getAttribLocation(e,"sunFlag");t.vertexAttribPointer(r,1,t.FLOAT,0,12*i,11*i),t.enableVertexAttribArray(r);const l=t.getUniformLocation(e,"model"),c=t.getUniformLocation(e,"nM"),h=this.pM.multiply(this.rM.multiply(this.sM)),m=new Y(""+h);m.invertSelf(),m.transposeSelf(),t.uniformMatrix4fv(l,0,h.toFloat32Array()),t.uniformMatrix4fv(c,0,m.toFloat32Array()),t.drawArrays(t.TRIANGLES,0,3*this.faces.length)},this.gl=X,this.program=V,this.vertices=t,this.faces=e,i&&(this.normals=i),this.pM=new Y,this.rM=new Y,this.sM=new Y,this.position=new G(0,0,0),this.rotation=new G(0,0,0),this.scale=new G(1,1,1),this.texture=a,this.textureCoords=s,this.initialize(a,n),this.buffer=this.gl.createBuffer()}distance(t){return this.directionalVector(t).magnitude()}directionalVector(t){return this.position.subtract(t.position)}rotate(t,e,i){this.rotation=this.rotation.subtract(new G(-t,-e,-i)),this.rM.rotateSelf(t,e,i)}translate(t,e,i){this.position=this.position.subtract(new G(-t,-e,-i)),this.pM.translateSelf(t,e,i)}rescale(t){this.scale=this.scale.scale(t),this.sM.scaleSelf(t,t,t)}initialize(t,e=0){const i=[],s=e?1:0;for(let e=0;this.faces.length>e;e++){const{vAi:a,vBi:n,vCi:o,color:r}=this.faces[e],l=this.vertices[a],c=this.vertices[n],h=this.vertices[o];let m,d,u,p,v,w;this.normals?(m=this.normals[a],d=this.normals[n],u=this.normals[o]):m=d=u=l.subtract(c).cross(l.subtract(h)),t?(this.gl_texture=this.gl.createTexture(),this.texture=t,p=this.textureCoords[a],v=this.textureCoords[n],w=this.textureCoords[o]):(p={u:0,v:0},v={u:0,v:0},w={u:0,v:0}),i.push(l.x,l.y,l.z,r.r,r.g,r.b,m.x,m.y,m.z,p.u,p.v,s,c.x,c.y,c.z,r.r,r.g,r.b,d.x,d.y,d.z,v.u,v.v,s,h.x,h.y,h.z,r.r,r.g,r.b,u.x,u.y,u.z,w.u,w.v,s)}this.vbo=new Float32Array(i)}}const q={objects:{},attractors:{},movers:{}};class Z extends ${constructor(t){super([],[]),this.mass=t.reduce(((t,e)=>t+e.mass),0);let e=new G(0,0,0);for(let i=0;t.length>i;i++)e=e.add(t[i].position.scale(1/this.mass));this.position=e}}const K=t=>{const e=ve.getPosition();ve.move(e.x-t.position.x+t.size,e.y-t.position.y-t.size,t.position.z+e.z+t.size*o.zoom),ve.lookAt(t.position),ve.follow(t)},{gravitationalConstant:J,maxPlanetSize:Q}=o;let tt=1;class et extends ${constructor(t,e,i,s,a,n,o,r,l,c,h,m=0){o||((o=[])[0]=new G(-e,-e,-e),o[1]=new G(-e,-e,e),o[2]=new G(-e,e,-e),o[3]=new G(-e,e,e),o[4]=new G(e,-e,-e),o[5]=new G(e,e,-e),o[6]=new G(e,-e,e),o[7]=new G(e,e,e)),r||((r=[])[0]=new W(0,1,2,s),r[1]=new W(3,2,1,s),r[2]=new W(5,7,4,s),r[3]=new W(6,4,7,s),r[4]=new W(2,3,5,s),r[5]=new W(7,5,3,s),r[6]=new W(4,6,0,s),r[7]=new W(1,0,6,s),r[8]=new W(3,1,7,s),r[9]=new W(6,7,1,s),r[10]=new W(5,4,2,s),r[11]=new W(0,2,4,s)),super(o,r,l,c,h,m),this.id=tt,tt++,this.size=e,this.mass=i||1,this.velocity=a||new G(0,0,0),this.acceleration=n||new G(0,0,0),this.name=t,q.objects[this.id]=this}update(){this.velocity=this.velocity.subtract(this.acceleration),this.translate(this.velocity.x,this.velocity.y,this.velocity.z),this.acceleration=this.acceleration.scale(0),this.cUL(),this.position.magnitude()-this.size>o.universeSize&&this.destroy(q)}cUL(){return(t=>{const e=r(""+t.id);if(!e)return;const i=r(t.id+"-name"),s=r(t.id+"-mass"),a=r(t.id+"-size"),n=r(t.id+"-velocity"),o=r(t.id+"-position");return i.innerHTML="Name: "+t.name,s.innerHTML="Mass: "+t.mass.toFixed(2),a.innerHTML="Size: "+t.size.toFixed(2),n.innerHTML=`Velocity: [${t.velocity.x.toFixed(2)}, ${t.velocity.y.toFixed(2)}, ${t.velocity.z.toFixed(2)}]`,o.innerHTML=`Position: [${t.position.x.toFixed(2)}, ${t.position.y.toFixed(2)}, ${t.position.z.toFixed(2)}]`,e})(this)||(t=>{const e=document.createElement("li");e.id=""+t.id;const i=document.createElement("div");i.className="card flexContainer",e.appendChild(i);const s=document.createElement("ul"),a=document.createElement("ul");i.appendChild(s),i.appendChild(a);const n=document.createElement("h5");n.id=e.id+"-name",n.innerHTML="Name: "+t.name,n.style.fontWeight="bold";const o=document.createElement("h5");o.id=e.id+"-mass",o.innerHTML="Mass: "+t.mass.toFixed(2);const r=document.createElement("h5");r.id=e.id+"-size",r.innerHTML="Size: "+t.size.toFixed(2),s.appendChild(n),s.appendChild(o),s.appendChild(r);const l=document.createElement("h5");l.id=e.id+"-position",l.innerHTML=`Position: [${t.position.x.toFixed(2)},${t.position.y.toFixed(2)},${t.position.z.toFixed(2)}]`;const c=document.createElement("h5");c.id=e.id+"-velocity",c.innerHTML=`Velocity: [${t.velocity.x.toFixed(2)},${t.velocity.y.toFixed(2)},${t.velocity.z.toFixed(2)}]`,a.appendChild(l),a.appendChild(c);const h=document.createElement("div");h.className="flexContainer column",i.appendChild(h);const m=document.createElement("button");m.innerHTML="Fly To",m.onclick=()=>K(t),h.appendChild(m);const d=document.createElement("button");return d.innerHTML="Look At",d.onclick=()=>{ve.lookAt(t.position)},h.appendChild(d),e})(this)}applyForce(t){this.acceleration=this.acceleration.add(t.scale(1/this.mass))}gravitationalForce(t,e){return J*this.mass*t.mass/(e*e)}calculateAttraction(t){let e=this.directionalVector(t);const i=Math.max(e.magnitude(),.01);e=e.normalize();let s=this.gravitationalForce(t,i);return e.scale(s)}forceOfCenterMass(t){return Math.sqrt(J*Math.max(this.mass,t.mass)/this.distance(t))}setStableOrbit(t){const e=t instanceof et?t:new Z(t);if(e.mass>this.mass){const t=this.forceOfCenterMass(e);this.velocity=new G(0,t,0),this.acceleration=this.acceleration.scale(0)}}destroy(t){delete t.objects[this.id],delete t.movers[this.id],delete t.attractors[this.id];const e=document.getElementById(""+this.id);e&&e.remove()}aM(){return q.movers[this.id]=this,this}aA(){return q.attractors[this.id]=this,this}absorb(t,e){let i=this.size+e.size;i=Math.min(i,Q),this.rescale(i/this.size),this.size=i,this.alterTrajectory(e),this.mass+=e.mass,e.destroy(t)}alterTrajectory(t){const e=this.mass+t.mass,i=this.velocity.scale(this.mass/e),s=t.velocity.scale(t.mass/e),a=i.add(s);return this.velocity=a,a}}class it extends et{constructor(t,e,i,s,a,n,o,r,l=0){const c=[],h=[],m=[];for(let t=0;i>=t;t++){const e=t*Math.PI/i,s=Math.sin(e),a=Math.cos(e);for(let e=0;i>=e;e++){const n=2*e*Math.PI/i;c.push(new G(Math.sin(n)*s,a,Math.cos(n)*s)),m.push({u:e/i,v:t/i})}}for(let t=0;i>t;t++)for(let e=0;i>e;e++){const s=t*(i+1)+e,a=s+(i+1);h.push(new W(s,a,s+1,r)),h.push(new W(s+1,a,a+1,r))}super(t,e,s,r,a,n,c,h,c,m,o,l),this.rescale(e)}intersect(t){return this.distance(t)<=this.size+t.size}}const{starMasstoRadius:st,massColorFactor:at}=o,nt=document.getElementById("starList"),ot=t=>t>.45*at?t>.8*at?t>1.04*at?t>1.4*at?t>2.1*at?t>15.8*at?j.Blue:j.ClassB:j.ClassA:j.White:j.Yellow:j.Orange:j.Red;class rt extends it{constructor(t,e,i,s,a,n){super(t,st(i),e,i,s,a,n,ot(i),1),this.hitBoxTimer=30,this.addToList()}update(){this.hitBoxTimer>-1&&(--this.hitBoxTimer,0===this.hitBoxTimer&&this.aA().aM()),it.prototype.update.call(this)}hC(t,e){this.absorb(t,e),e.destroy(t)}checkCollision(t,e){this.intersect(e)&&this.hC(t,e)}absorb(t,e){this.mass+=e.mass;const i=st(this.mass);this.rescale(i/this.size),this.size=i,this.reColor()}reColor(){const t=ot(this.mass);this.faces[0].color!==t&&(this.faces.forEach((e=>{e.color=t})),this.initialize(this.texture,1))}addToList(){const t=this.cUL();nt.appendChild(t)}}const lt=document.getElementById("planetList"),{minPlanetMass:ct,maxPlanetMass:ht,impactThreshold:mt}=o;class dt extends it{constructor(t,e,i,s,a,n,o,r){super(t,e,i,s,a,n,o,r),this.addToList(),this.hitBoxTimer=30}update(){this.hitBoxTimer>-1&&(--this.hitBoxTimer,0===this.hitBoxTimer&&this.aA().aM()),it.prototype.update.call(this)}checkCollision(t,e){this.intersect(e)&&this.hC(t,e)}hC(t,e){if(e instanceof rt)e.hC(t,this);else if(e instanceof dt){const i=e.size>this.mass?e:this,s=i!==this?this:e;i.alterTrajectory(s).add(i.velocity).magnitude()>mt||i.mass+s.mass>ht?i.split(t,s):i.absorb(t,s)}}split(t,e){const i=this.mass+e.mass,s=this.size+e.size;let a=Math.max(.333333333*i,ct);const n=this.alterTrajectory(e),o=n.normalize(),r=this.position.add(e.position).scale(.5),l=()=>2*Math.random()-1;let m=i;for(;m>=ct;){a=Math.min(a,m);const t=Math.min(m,c(a,ct));let e=t/i*s;const d=n.scale(i/t).magnitude(),u=new G(o.x-l(),o.y-l(),o.z-l()).normalize().scale(d),p=new dt("Debris",e,16,t,u,new G(0,0,0),this.texture,N()),[v,w,y]=h(r,u,e);p.translate(v,w,y),m-=t}this.destroy(t),e.destroy(t)}addToList(){const t=this.cUL();lt.appendChild(t)}}const{massColorFactor:ut,maxSpawnTime:pt,minSpawnTime:vt,minPlanetMass:wt,maxPlanetMass:yt,minPlanetSize:ft,maxPlanetSize:xt,maxStarMass:Mt,minStarMass:bt}=o,gt=document.getElementById("whiteHoleList");class Tt extends it{constructor(t,e,i){super(t,1,e,-1,new G(0,0,0),new G(0,0,0),i[0],new P(3,3,3),1),this.addToList(),this.timeToSpawn=c(pt,vt),this.newStarNumber=1,this.newPlanetNumber=1,this.textures=i}update(){this.timeToSpawn>0?this.timeToSpawn--:(this.spawn(),this.timeToSpawn=c(pt,vt))}spawn(){if((Math.random()>.75?rt:dt)===dt){const t=new dt("New Planet "+this.newPlanetNumber++,c(xt,ft),16,c(yt,wt),this.randomVelocity(),null,this.textures[c(this.textures.length)],j.randomColor()),[e,i,s]=h(this.position,t.velocity);t.translate(e,i,s)}else{const t=new rt("New Star "+this.newPlanetNumber++,16,this.randomWeightedMass(),this.randomVelocity(),null,this.textures[2]),[e,i,s]=h(this.position,t.velocity);t.translate(e,i,s)}}randomWeightedMass(){const t=15.8*ut,e=2.1*ut,i=1.4*ut,s=1.04*ut,a=.8*ut,n=.45*ut;class o{constructor(t,e,i){this.chance=t,this.maxMass=e,this.minMass=i}}const r=[new o(3e-7,Mt,t),new o(.0013,t,e),new o(.006,e,i),new o(.03,i,s),new o(.076,s,a),new o(.121,a,n),new o(.7641,n,bt)];let l,h=0,m=Math.random();for(l in r)if(h+=r[l].chance,h>=m)return c(r[l].maxMass,r[l].minMass)}randomVelocity(){const t=()=>2*Math.random()-1;return new G(t(),t(),t()).normalize().scale(c(.1-.025))}addToList(){const t=this.cUL();gt.appendChild(t)}}const{maxPlanetMass:At,maxPlanetSize:zt,minPlanetMass:Et,minPlanetSize:Lt,maxStarMass:St,minStarMass:Ft,maxStarSize:Ct,universeSize:Rt}=o,Pt=(t,e)=>{const i=new rt("sun",16,Ct,null,null,e[2]).aA().aM();for(let s=0;t>s;s++){const a=new dt("Planet "+(s+1),Lt,16,Et,null,null,e[3],N()).aA().aM();a.translate(-i.size,0,0),a.translate(-(Rt-i.size)/t*a.size*(s+1),0,0),a.setStableOrbit(i)}},{gl:_t,program:Bt}=R;class kt{constructor(t,e,i=0){this.gl=_t,this.program=Bt,this.drawStyle=i?_t.POINTS:_t.LINES;const s=t*e/2,a=[];for(let i=0;t>i;i++)for(let n=0;t>n;n++)a.push(new G(e*i-s,0,e*n-s)),a.push(new G(e*(i+1)-s,0,e*n-s)),a.push(new G(e*(i+1)-s,0,e*n-s)),a.push(new G(e*(i+1)-s,0,e*(n+1)-s)),a.push(new G(e*(i+1)-s,0,e*(n+1)-s)),a.push(new G(e*i-s,0,e*(n+1)-s)),a.push(new G(e*i-s,0,e*(n+1)-s)),a.push(new G(e*i-s,0,e*n-s));this.vertices=a,this.pM=new Y,this.rM=new Y,this.sM=new Y;const n=[];for(let t=0;this.vertices.length>t;t++){const e=this.vertices[t];n.push(e.x,e.y,e.z,1,1,1,-99)}this.vbo=new Float32Array(n),this.buffer=this.gl.createBuffer()}draw(){const{gl:t,program:e}=this;t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.vbo,t.STATIC_DRAW);const i=this.vbo.BYTES_PER_ELEMENT,s=t.getAttribLocation(e,"position");t.vertexAttribPointer(s,3,t.FLOAT,0,7*i,0),t.enableVertexAttribArray(s);const a=t.getAttribLocation(e,"color");t.vertexAttribPointer(a,3,t.FLOAT,0,7*i,3*i),t.enableVertexAttribArray(a);const n=t.getAttribLocation(e,"texCoord");t.vertexAttribPointer(n,2,t.FLOAT,0,7*i,5*i),t.enableVertexAttribArray(n);const o=t.getUniformLocation(e,"model"),r=t.getUniformLocation(e,"nM"),l=this.sM.multiply(this.pM.multiply(this.rM)),c=new Y(""+l);c.invertSelf(),c.transposeSelf(),t.uniformMatrix4fv(o,0,l.toFloat32Array()),t.uniformMatrix4fv(r,0,c.toFloat32Array()),t.bindTexture(t.TEXTURE_2D,null),t.drawArrays(this.drawStyle,0,this.vertices.length),t.bindBuffer(t.ARRAY_BUFFER,null)}}const{canvas:Dt,gl:Ut,program:Ot}=R,{zoom:It}=o;class Ht{constructor(){this.perspective=(t,e,i,s)=>{const a=1/Math.tan(t*Math.PI/180);return new DOMMatrix([a/e,0,0,0,0,a,0,0,0,0,(s+i)/(i-s),-1,0,0,2*i*s/(i-s),0])},this.cameraGL=Ut.getUniformLocation(Ot,"camera"),this.viewM=new DOMMatrix,this.move(0,3,25),this.projM=this.perspective(It,Dt.width/Dt.height,1,1e3),this.followTarget=null,this.watchTarget=null}view(){const t=this.projM.multiply(this.viewM.inverse());Ut.uniformMatrix4fv(this.cameraGL,0,t.toFloat32Array())}rotate(t,e,i){this.viewM.rotateSelf(e,t,i)}move(t=0,e=0,i=0){this.viewM.translateSelf(t,e,i);const s=this.getPosition().magnitude();.9*o.universeSize>s||this.viewM.translateSelf(-t,-e,-i)}getPosition(){const t=this.viewM.inverse();return new G(t.m41,t.m42,t.m43)}lookAt(t){const e=this.getPosition(),i=new G(0,1,0),s=e.subtract(t).normalize(),a=i.cross(s).normalize(),n=s.cross(a).normalize();this.viewM=new DOMMatrix([a.x,a.y,a.z,0,n.x,n.y,n.z,0,s.x,s.y,s.z,0,e.x,e.y,e.z,1]),this.view()}follow(t){this.followTarget=t}watch(t){this.watchTarget=t}}class Nt extends it{constructor(t,e,i){const s=[];for(let t=0;e*e>t;t++)1===Math.floor(Math.random()*i)?s.push(255,255,255,255):s.push(0,0,0,255);super("starfield",t,16,null,null,null,{width:e,height:e,data:new Uint8Array(s)},D,1)}}const{speedAdjust:jt,massAdjust:Xt,sizeAdjust:Vt,minPlanetMass:Yt,maxPlanetMass:Gt,minPlanetSize:Wt,maxPlanetSize:$t,minStarMass:qt,maxStarMass:Zt}=o,Kt=()=>{const t=Ae();t&&t.destroy(q)},Jt=t=>{const e=document.getElementsByClassName("hideable");for(let t=0;e.length>t;t++)e.item(t).style.visibility="hidden";const i=document.getElementsByClassName(t);for(let t=0;i.length>t;t++)i.item(t).style.visibility="visible";"whiteHole"!==t&&Qt("star"===t?1:0)},Qt=t=>{const e=(t,e)=>Math.pow(10,Math.floor(Math.log10(t-e))-2);r("bodyOptions").style.visibility="visible";const i=t?Zt:Gt,s=t?qt:Yt,a=$t,n=Wt,o=s,l=n,c=e(i,s),h=e(a,n),m=r("bodyMass"),d=r("bodySize");m.max=""+i,m.min=""+s,m.step=""+c,m.defaultValue=""+o,te(m),d.max=""+a,d.min=""+n,d.step=""+h,d.defaultValue=""+l,te(d)},te=t=>{const e=document.getElementById(t.id+"Label");t.addEventListener("input",(()=>{e.innerHTML=`${t.id.slice(4)}: ${t.value}`}))},{gl:ee,canvas:ie}=R,{movement:se,universeSize:ae}=o,{movers:ne,attractors:oe,objects:re}=q,le=r("bodyButton"),ce=r("cancelButton");r("stableOrbit").onclick=()=>Se(1),r("binaryStars").onclick=()=>Se(2),r("randomSystem").onclick=()=>Se(3),r("emptyUniverse").onclick=()=>Se(0);const he=r("bodyForm"),me={spinL:0,spinR:0,up:0,down:0,right:0,left:0,in:0,out:0,spinI:0,spinO:0,spinU:0,spinD:0,camR:0,camL:0,camU:0,camD:0,camI:0,camO:0,camRL:0,camRR:0};let de,ue,pe,ve,we,ye=0;document.onkeydown=t=>{"`"===t.key?ye=!ye:d(t,1,me)},document.onkeyup=t=>d(t,0,me);const fe=()=>{if(ve.view(),ee.viewport(0,0,ee.canvas.width,ee.canvas.height),ee.clear(ee.COLOR_BUFFER_BIT|ee.DEPTH_BUFFER_BIT),we.draw(),!ye){for(let t in ne){const e=ne[t];for(let i in oe)ne[t]!==oe[i]&&e.checkCollision(q,oe[i])}for(let t in ne)for(let e in oe)if(e!==t){const i=ne[t].calculateAttraction(oe[e]);ne[t].applyForce(i)}}for(let t in re){const e=re[t];ye||e.update(),e.draw()}((t,e=0)=>{if(t.camL&&(ve.follow(),ve.move(-.1,0,0)),t.camR&&(ve.follow(),ve.move(.1,0,0)),t.camU&&(ve.follow(),ve.move(0,.1,0)),t.camD&&(ve.follow(),ve.move(0,-.1,0)),t.camI&&(ve.follow(),ve.move(0,0,-.1)),t.camO&&(ve.follow(),ve.move(0,0,.1)),t.camRL&&(ve.follow(),ve.rotate(0,0,1)),t.camRR&&(ve.follow(),ve.rotate(0,0,-1)),!e&&ve.followTarget){const{x:t,y:e,z:i}=ve.followTarget.velocity;ve.move(-t,e,-i)}})(me,ye),de&&(((t,e,i)=>{const s=r("posX"),a=r("posY"),n=r("posZ");e.up&&(t.translate(0,i,0),a.value=t.position.y.toFixed(2)),e.down&&(t.translate(0,-i,0),a.value=t.position.y.toFixed(2)),e.left&&(t.translate(-i,0,0),s.value=t.position.x.toFixed(2)),e.right&&(t.translate(i,0,0),s.value=t.position.x.toFixed(2)),e.in&&(t.translate(0,0,-i),n.value=t.position.z.toFixed(2)),e.out&&(t.translate(0,0,i),n.value=t.position.z.toFixed(2)),e.spinL&&t.rotate(10*i,0,0),e.spinR&&t.rotate(-10*i,0,0),e.spinU&&t.rotate(0,10*i,0),e.spinD&&t.rotate(0,-10*i,0),e.spinI&&t.rotate(0,0,10*i),e.spinO&&t.rotate(0,0,-10*i)})(de,me,se),de.draw()),pe.draw(),requestAnimationFrame(fe)};window.onload=()=>{var t,s;Ee(),(t=>{const i=new e;i.init(t),i.generate();let s=0;const a=r("musicStatus");setInterval((()=>{if(s)return;const t=i.generate();if(a.innerHTML=`Music Loading: ${(100*t).toFixed(0)}%`,s=t>=1,s){const t=i.createWave(),e=document.createElement("audio");e.src=URL.createObjectURL(new Blob([t],{type:"audio/wav"})),e.loop=1,a.innerHTML="Click anywhere to begin",r("titleOverlay").onclick=()=>(t=>{r("titleOverlay").style.visibility="hidden";let e=1;t.play();const i=document.createElement("button");i.className="bottom",i.innerHTML="Pause Music",i.style.zIndex="0",r("instructions").appendChild(i),i.onclick=()=>{e?(i.innerHTML="Play Music",t.pause(),e=0):(i.innerHTML="Pause Music",t.play(),e=1)}})(e)}}),0)})(i),s=function*(){ue=[f,f],ue.push(v,w,y),we=new Nt(ae,2048,2e3),le.onclick=ge,ce.onclick=ze,Pt(10,ue),pe=new kt(10,10,1),ve=new Ht,ve.view(),K(q.objects[3]),requestAnimationFrame(fe)},new((t=void 0)||(t=Promise))(((e,i)=>{function a(t){try{o(s.next(t))}catch(t){i(t)}}function n(t){try{o(s.throw(t))}catch(t){i(t)}}function o(i){var s;i.done?e(i.value):(s=i.value,s instanceof t?s:new t((t=>{t(s)}))).then(a,n)}o((s=s.call(undefined)).next())}))};let xe=0,Me=-1,be=0;ie.onmousedown=t=>{Me=t.clientX,be=t.clientY,xe=1},document.onmouseup=()=>{xe=0},document.onmousemove=t=>{let e=t.clientX,i=t.clientY;xe&&(ve.watch(),ve.rotate((e-Me)/ie.width*100,(i-be)/ie.height*100,0),Me=e,be=i)};const ge=()=>{r("bodyOptions").style.visibility="hidden";const t=r("bodyName"),e=document.getElementsByTagName("input");if("none"===he.style.display){ye=1,le.innerHTML="Finalize Body",ce.style.display="inline-block",he.style.display="inline-block",r("bodyStar").checked=0,r("bodyPlanet").checked=0;for(let t=0;e.length>t;t++){const i=e[t];i.onfocus=()=>{document.onkeydown=null,document.onkeyup=null},i.onblur=()=>{document.onkeydown=t=>{"`"===t.key&&(ye=!ye),d(t,1,me)},document.onkeyup=t=>d(t,0,me)}}((t,e)=>{t.addEventListener("change",(t=>((t,e)=>{const i=Ae(),s=t.target.id,a=parseFloat(r("bodySize").value)*Vt||0,n=parseFloat(r("bodyMass").value)*Xt||0,o=parseFloat(r("velX").value)*jt||0,l=parseFloat(r("velY").value)*jt||0,c=parseFloat(r("velZ").value)*jt||0,h=parseFloat(r("posX").value)||0,m=parseFloat(r("posY").value)||0,d=parseFloat(r("posZ").value)||0;let u;r("bodyStar").checked&&(u="star"),r("bodyPlanet").checked&&(u="planet");const p=r("bodyWhiteHole");p&&p.checked&&(u="whiteHole");let v=0;r("grass").checked&&(v=3),r("water").checked&&(v=4),r("sand").checked&&(v=2);const w=r("colorRGB"),y=parseInt(w.value.substr(1,2),16)/256,f=parseInt(w.value.substr(3,2),16)/256,x=parseInt(w.value.substr(5,2),16)/256,M=new P(y,f,x);let b,g,T=[0,0,0];if(i){if("water"===s&&(i.texture=e[4]),"grass"===s&&(i.texture=e[3]),"sand"===s&&(i.texture=e[2]),"solid"===s||"colorRGB"===s){"solid"===s&&(i.texture=e[0]);for(let t=0;i.faces.length>t;t++)i.faces[t].color=M;i.initialize(i.texture,null)}("bodyMass"===s&&"star"===u||"bodySize"===s&&"planet"===u)&&(b=u,T=[i.position.x,i.position.y,i.position.z],i.destroy(q)),["velX","velY","velZ"].includes(s)&&(i.velocity=new G(o,l,c)),["posX","posY","posZ"].includes(s)&&i.translate(h-i.position.x,m-i.position.y,d-i.position.z)}if("bodyPlanet"===s||"planet"===b){if(Kt(),Jt(u),g=new dt("_tempBody",a,12,n,new G(o,l,c),null,e[v]),g.translate(T[0],T[1],T[2]),0===v){for(let t=0;g.faces.length>t;t++)g.faces[t].color=M;g.initialize(g.texture,null)}Te(g)}"bodyStar"!==s&&"star"!==b||(Kt(),Jt(u),g=new rt("_tempBody",12,n,new G(o,l,c),null,e[2]),g.translate(T[0],T[1],T[2]),Te(g)),"bodyWhiteHole"===s&&(Kt(),Jt(u),g=new Tt("_tempBody",16,e),g.translate(T[0],T[1],T[2]),Te(g))})(t,e)))})(he,ue)}else r("sizeDiv").style.visibility="hidden",ye=0,le.innerHTML="Add Body",ce.style.display="none",he.style.display="none",de&&(de.name=t.value,"WhiteHole"!==de.constructor.name&&de.aA().aM(),Te(null)),he.removeEventListener("change",null)},Te=t=>{de=t},Ae=()=>de,ze=()=>{Kt(),de=null,ge()},Ee=()=>{const t=document;t.monetization&&("started"===t.monetization.state?Le():t.monetization.addEventListener("monetizationstart",(()=>{Le()})))},Le=()=>{const t=document.getElementById("radioButtons"),e=document.createElement("input");e.type="radio",e.id="bodyWhiteHole",e.name="bodyType",e.value="whiteHole",t.appendChild(e);const i=document.createElement("label");i.setAttribute("for",e.id),i.innerHTML="White Hole",t.appendChild(i),r("whHeader").style.visibility="visible"},Se=t=>{for(let t in q.objects)q.objects[t].destroy(q);switch(de=null,ve=new Ht,t){case 1:Pt(10,ue);break;case 2:(t=>{const e=Ft,i=new rt("sun1",16,e,new G(0,.03,0),null,t[2]).aA().aM(),s=new rt("sun2",16,e,new G(0,-.03,0),null,t[2]).aA().aM();i.translate(5*i.size,0,0),s.translate(5*-s.size,0,0)})(ue);break;case 3:((t,e)=>{for(let t=0;50>t;t++){const i=Math.random()*(At-Et)+Et,s=Math.random()*(zt-Lt)+Lt,a=new P(Math.random(),Math.random(),Math.random()),n=new G(Math.random()/100,Math.random()/100,Math.random()/100),o=new G(0,0,0),r=Math.floor(8*Math.random())+8,c=new dt("Planet "+t,s,r,i,n,o,e[2],a).aA().aM(),[h,m,d]=l();c.translate(h,m,d)}})(0,ue),((t,e)=>{for(let t=0;2>t;t++){const i=Math.random()*(St-Ft)+Ft,s=new G(Math.random()/100,Math.random()/100,Math.random()/100),a=new G(0,0,0),n=e[2],o=Math.floor(8*Math.random())+8,r=new rt("Star "+t,o,i,s,a,n).aA().aM(),[c,h,m]=l();r.translate(c,h,m)}})(0,ue)}}})()})();</script> </body></html>